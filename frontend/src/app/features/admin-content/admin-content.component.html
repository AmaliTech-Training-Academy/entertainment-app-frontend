<div class="media-management">
  <h2>Media Management</h2>
  
  <div class="media-controls">
    <div class="controls-row">
      <button class="upload-btn">Upload New Movie</button>
      
      <div class="search-container">
        <input
          type="text"
          placeholder="Search movies..."
          [(ngModel)]="searchQuery"
          class="search-input"
        />
      </div>
      
      <button class="clear-filters-btn" (click)="clearFilters()" *ngIf="searchQuery">
        Clear Search
      </button>
    </div>
    
    <div class="results-info">
      <span>Showing {{ media.length }} of {{ totalElements }} results</span>
    </div>
  </div>

  <div class="table-container">
    <table class="media-table">
      <thead>
        <tr>
          <th>Thumbnail</th>
          <th>Title</th>
          <th>Type</th>
          <th>Year</th>
          <th>Genres</th>
          <th>Rating</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of media; trackBy: trackByMediaId" class="media-row">
          <td class="thumbnail-cell">
            <img
              [src]="item.thumbnailUrl"
              [alt]="item.title"
              class="media-thumbnail"
              loading="lazy"
            />
          </td>
          <td class="title-cell">{{ item.title }}</td>
          <td class="type-cell">{{ item.mediaType }}</td>
          <td class="year-cell">{{ item.releaseYear }}</td>
          <td class="genres-cell">{{ item.genres.join(', ') }}</td>
          <td class="rating-cell">
            <span class="rating">{{ item.averageRating | number:'1.1-1' }}</span>
          </td>
          <td class="actions-cell">
            <button class="edit-btn">Edit</button>
            <button class="delete-btn">Delete</button>
          </td>
        </tr>
        
        <!-- Empty state -->
        <tr *ngIf="media.length === 0" class="empty-row">
          <td colspan="7" class="empty-cell">
            <div class="empty-state">
              <p>No media found</p>
              <p *ngIf="searchQuery" class="empty-subtitle">
                Try adjusting your search
              </p>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Enhanced Pagination -->
  <div class="pagination" *ngIf="totalPages > 1">
    <button 
      class="page-btn" 
      (click)="changePage(0)" 
      [disabled]="currentPage === 0"
      title="First Page">
      &#171;
    </button>
    
    <button 
      class="page-btn" 
      (click)="prevPage()" 
      [disabled]="currentPage === 0"
      title="Previous Page">
      &#8249;
    </button>
    
    <button 
      *ngFor="let page of getPageNumbers()" 
      class="page-btn"
      [class.active]="page === currentPage"
      (click)="changePage(page)">
      {{ page + 1 }}
    </button>
    
    <button 
      class="page-btn" 
      (click)="nextPage()" 
      [disabled]="currentPage + 1 >= totalPages"
      title="Next Page">
      &#8250;
    </button>
    
    <button 
      class="page-btn" 
      (click)="changePage(totalPages - 1)" 
      [disabled]="currentPage + 1 >= totalPages"
      title="Last Page">
      &#187;
    </button>
    
    <div class="page-info">
      <span>Page {{ currentPage + 1 }} of {{ totalPages }}</span>
    </div>
  </div>
</div>