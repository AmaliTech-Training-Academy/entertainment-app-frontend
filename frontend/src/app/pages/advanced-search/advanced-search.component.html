<div class="app-container">
  <main class="main-content">
    <form class="search-section">
      <app-advanced-search (search)="onSearch($event)"></app-advanced-search>
    </form>

    <section class="trending-section">
      <h3 class="section-title">
        {{
          advancedSearchComponent?.hasActiveFilters()
            ? "Search Results"
            : isLoading
            ? "Loading..."
            : "Trending Now"
        }}
      </h3>

      <app-pagination
        *ngIf="filteredMovies.length > 0"
        [currentPage]="currentPage"
        [totalItems]="filteredMovies.length"
        [itemsPerPage]="6"
        (pageChange)="onPageChange($event)"
      ></app-pagination>

      <div
        *ngIf="!isLoading && filteredMovies.length === 0"
        class="empty-state"
      >
        <h3 class="empty-title">No Results Found</h3>
        <button
          mat-raised-button
          color="primary"
          *ngIf="search_filter_state && !isLoading"
          (click)="resetFilters()"
        >
          Reset Filters
        </button>
      </div>

      <div class="spinner-container" *ngIf="isLoading">
        <mat-progress-spinner
          mode="indeterminate"
          color="accent"
          diameter="40"
        ></mat-progress-spinner>
      </div>
      <div *ngIf="filteredMovies.length > 0 && !isLoading" class="movies-grid">
        <app-movie-card
          *ngFor="let movie of filteredMovies"
          [movie]="movie"
        ></app-movie-card>
      </div>

      <app-pagination
        [currentPage]="currentPage"
        [totalItems]="filteredMovies.length"
        [itemsPerPage]="6"
        (pageChange)="onPageChange($event)"
        *ngIf="filteredMovies.length > 0"
      ></app-pagination>
    </section>
  </main>
</div>
